<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>员工收入证明管理</title>
  <link rel="stylesheet" href="../css/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/dcalendar.picker.css" />
  <link rel="stylesheet" href="../js/webuploader/webuploader.css" />
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
<div class="c-wrap earning">
    <div class="header">
    	<i class="icon-book"></i>
    	<i class="icon-close"></i>
    	<h1 class="title">员工收入证明管理</h1>
    </div>
    <div class="c-main" id="main">
    	<div class="sidebar">
    		<h2 class="organize"><i class="arrow icon-arrow-left" id="shrink"></i>组织机构</h2>
    		<h3 class="subtitle">全部</h3>
    		<div id="treeview" class="treeview"></div>
    	</div>
    	<div class="content">
    		<div class="searchbar">
    			<h4 class="searchbar-title"><i id="open" class="icon-arrow-right"></i>搜索条件</h4>
    			<ul class="input-list c">
    				<li class="item">
    					<label class="label-name">需求汇总人</label>
    					<div class="input-wrap">
    						<input class="search-input" type="text" placeholder="请输入员工姓名" />
    					</div>
    				</li>
    				<li class="item">
    					<label class="label-name">申请状态</label>
    					<div class="input-wrap c" id="select-wrap">
    						<input class="select-input" id="select" type="text" placeholder="全部" />
    						<label class="icon-wrap">
    							<i class="icon-arrow-down"></i>
    						</label>
    						<ul class="select-list" id="select-list">
    							<li>选项1</li>
    							<li>选项2</li>
    						</ul>
    					</div>

    				</li>
    			</ul>
    			<ul class="input-list c">
    				<li class="item">
    					<label class="label-name">申请时间</label>
    					<div class="input-wrap c">
    						<label class="icon-wrap">
    							<i class="icon-date"></i>
    						</label>
    						<input id="mydatepicker" class="select-input" type="text" placeholder="全部" />
    						
    					</div>
    				</li>
    				<li class="item">
    					<label class="label-name">至</label>
    					<div class="input-wrap c">
    						<label class="icon-wrap">
    							<i class="icon-date"></i>
    						</label>
    						<input id="mydatepicker2" class="select-input" type="text" placeholder="全部" />
    						
    					</div>
    				</li>
    				<li class="btn-group-right">
    					<div class="btn-reset">重置</div>
    					<div class="btn-search">查询</div>
    				</li>
    			</ul>
    		</div>
    		<div class="table-result">
    			<h4>全部结果</h4>
    			<span>共134份</span>
    		</div>
    		<table class="table" id="table">
    			<thead>
	    			<tr>
	    				<th>序号</th>
	    				<th>申请人</th>
	    				<th>申请状态</th>
	    				<th>申请时间</th>
	    				<th>申请收入证明类型</th>
	    				<th>申请原因</th>
	    				<th>操作</th>
	    				<th class="check-wrap">全选<i class="icon-uncheck"></i></th>
	    			</tr>
    			</thead>
    			<tbody>
    				<tr>
    					<td>1</td>
    					<td>张三</td>
    					<td>已提交</td>
    					<td>2017-04-28／12:30</td>
    					<td>月收入证明</td>
    					<td>办理信用卡</td>
    					<td class="more-wrap"><i class="icon-more"></i></td>
    					<td class="check-wrap"><i class="icon-uncheck icon-checked"></i></td>
    				</tr>
    				<tr>
    					<td>1</td>
    					<td>张三</td>
    					<td>已提交</td>
    					<td>2017-04-28／12:30</td>
    					<td>月收入证明</td>
    					<td>办理信用卡</td>
    					<td class="more-wrap"><i class="icon-more"></i></td>
    					<td class="check-wrap"><i class="icon-uncheck icon-checked"></i></td>
    				</tr>
    				<tr>
    					<td>1</td>
    					<td>张三</td>
    					<td>已提交</td>
    					<td>2017-04-28／12:30</td>
    					<td>月收入证明</td>
    					<td>办理信用卡</td>
    					<td class="more-wrap"><i class="icon-more"></i></td>
    					<td class="check-wrap"><i class="icon-uncheck"></i></td>
    				</tr>
    				<tr>
    					<td>1</td>
    					<td>张三</td>
    					<td>已提交</td>
    					<td>2017-04-28／12:30</td>
    					<td>月收入证明</td>
    					<td>办理信用卡</td>
    					<td class="more-wrap"><i class="icon-more"></i></td>
    					<td class="check-wrap"><i class="icon-uncheck"></i></td>
    				</tr>
                    <tr>
                        <td colspan="8">
                            <!-- 页码 -->
                            <div class="page page-margin">
                                <ul>
                                    <!-- 空 -->
                                    <li>
                                        <a href="javascript:;" class="cursor-text">
                                            <i></i>
                                        </a>
                                    </li>
                                    <!-- 上一页 -->
                                    <!-- <li>
                                        <a href="javascript:;">
                                            <i class="icon-before"></i>
                                        </a>
                                    </li> -->
                                    <li><a href="javascript:;" class="hover">1</a></li>
                                    <li><a href="javascript:;">2</a></li>
                                    <li><a href="javascript:;">3</a></li>
                                    <li><a href="javascript:;">4</a></li>
                                    <li><a href="javascript:;">5</a></li>
                                    <!-- 下一页 -->
                                    <li>
                                        <a href="javascript:;">
                                            <i class="icon-next"></i>
                                        </a>
                                    </li>
                                </ul>
                                <span class="num">第<input type="text">页</span>
                                <button>确认</button>
                            </div>
                        </td>
                    </tr>
    			</tbody>
    		</table>
    		<ul class="table-menus" id="table-menus">
    			<li class="item">
    				<i class="icon-edit"></i>
    				<span>修改</span>
    			</li>
    			<li class="item">
    				<i class="icon-delete"></i>
    				<span>删除</span>
    			</li>
    			<li class="item">
    				<i class="icon-stop"></i>
    				<span>停用</span>
    			</li>
    			<li class="item">
    				<i class="icon-move-down"></i>
    				<span>下移</span>
    			</li>
    			<li class="item">
    				<i class="icon-look"></i>
    				<span>查看</span>
    			</li>
    			<li class="item">
    				<i class="icon-job"></i>
    				<span>职位列表</span>
    			</li>
    			<li class="item">
    				<i class="icon-upload"></i>
    				<span>上传说明书</span>
    			</li>
    		</ul>
    	</div>
    </div>
</div>
<!-- 信息弹窗 -->
<div class="body-alert" style="display:none;">
    <div class="alert-page">

        <!-- 红色错误信息弹窗 -->
       <!--  <div class="main">
            <i class="icon-close-white"></i>
            <i class="icon-wrong"></i>
            <h3>错误信息</h3>
            <p>第一条无法上移，请重新选择</p>
            <button class="btn-red">确认</button>
        </div> -->

        <!-- 黄色警告信息 -->
        <!-- <div class="main">
            <i class="icon-close-white"></i>
            <i class="icon-warm"></i>
            <h3>警告信息</h3>
            <p>请选择需要启用的组织</p>
            <button class="btn-yellow">确认</button>
        </div> -->

        <!-- 蓝色警告信息 -->
        <!-- <div class="main">
            <i class="icon-close-white"></i>
            <i class="icon-help"></i>
            <h3>警告信息</h3>
            <p>请选择需要启用的组织</p>
            <button class="btn-blue">确认</button>
        </div> -->
        

        <!-- 新增组织信息弹窗 -->
        <!-- <div class="add-org">
            <h3 class="title-public">
                新增组织消息
                <i class="icon-close-white fr"></i>
            </h3>
            <form action="">
                <div class="content-form">
                    <div class="input-row">
                        <div class="input-colum">
                            <span>上级组织编码</span>
                            <span class="code">20171220BSEAL29876</span>
                        </div>
                        <div class="input-colum">
                            <span>上级组织编码</span>
                            <span class="code">根组织结构</span>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum">
                            <span><i>*</i>组织编码</span>
                            <input type="text">
                        </div>
                        <div class="input-colum">
                            <span><i>*</i>组织名称</span>
                            <input type="text">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum">
                            <span><i>*</i>组织简称</span>
                            <input type="text">
                        </div>
                        <div class="input-colum">
                            <span><i>*</i>组织属性</span>
                            <input type="text">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum">
                            <span><i>*</i>组织层级</span>
                            <select name="" id="">
                                <option value=""></option>
                                <option value="1">第一级</option>
                                <option value="2">第二级</option>
                            </select>
                        </div>
                        <div class="input-colum">
                            <span><i>*</i>组织类型</span>
                            <select name="" id="">
                                <option value=""></option>
                                <option value="1">第一级</option>
                                <option value="2">第二级</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum">
                            <span><i>*</i>组织分类</span>
                            <select name="" id="">
                                <option value=""></option>
                                <option value="1">第一级</option>
                                <option value="2">第二级</option>
                            </select>
                        </div>
                        <div class="input-colum">
                            <span><i>*</i>业务口</span>
                            <select name="" id="">
                                <option value=""></option>
                                <option value="1">第一级</option>
                                <option value="2">第二级</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum">
                            <span>有效起始日期</span>
                            <input type="text" id="mydatepicker3" class="date-pic">
                        </div>
                        <div class="input-colum">
                            <span>有效终止日期</span>
                            <input type="text" id="mydatepicker4" class="date-pic">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum">
                            <span>是否源自HRMIS</span>
                            <label for="radio-pic" class="radio-pic">
                                <input type="checkbox" id="radio-pic" checked="checked">
                            </label>
                            否
                        </div>
                        <div class="input-colum">
                            <span><i>*</i>状态</span>
                            <select name="" id="">
                                <option value=""></option>
                                <option value="1">第一级</option>
                                <option value="2">第二级</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum input-all">
                            <span class="span-text">组织编码</span>
                            <textarea name="" id="" cols="30" rows="10"></textarea>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum input-all">
                            <span class="span-text">备注</span>
                            <textarea name="" id="" cols="30" rows="10"></textarea>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum input-all btn-watch" id="uploader">
                            <span>是否源自HRMIS</span>
                            <label for="inpf" class="input-file"></label>
                            <button id="picker">浏览</button>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-colum input-all">
                            <span>&nbsp;</span>
                            <p>上传文件的后缀名应为：doc,docx,txt,文件大小不超过10MB</p>
                        </div>
                    </div>
                </div>
            </form>
        </div> -->

        <!-- 导入员工信息弹窗 -->
        <div class="import">
            <h3 class="title-public">
                导入员工信息
                <i class="icon-close-white fr"></i>
            </h3>
            <div class="main-import">
                <p class="name">选择文件</p>
                <div class="btn-main">
                    <div class="btn-watch" id="uploader">
                        <label for="inpf" class="input-file"></label>
                        <button id="picker">浏览</button>
                    </div>
                    <div class="a-btn-list">
                        <a href="javascript:;" class="a-gray" id="ctlBtn">开始导入</a>
                        <a href="javascript:;">下载模板</a>
                    </div>
                </div>
                <p class="name">系统处理进度</p>
                <ul class="step">
                    <li class="first step-hover">
                        <i>1</i>
                        <span>数据检验</span>
                    </li>
                    <li class="step-hover">
                        <i>2</i>
                        <span>数据导入</span>
                    </li>
                    <li class="last">
                        <i>3</i>
                        <span>操作完成</span>
                    </li>
                </ul>
                <ul class="num-ul">
                    <li>
                        <span class="num-big">0</span>
                        <span class="span-block">
                            <p class="tit-step">总行数</p>
                            <p>total number</p>
                        </span>
                    </li>
                    <li class="success">
                        <span class="num-big">0</span>
                        <span class="span-block">
                            <p class="tit-step">成功数</p>
                            <p>success number</p>
                        </span>
                    </li>
                    <li class="failure">
                        <span class="num-big">0</span>
                        <span class="span-block">
                            <p class="tit-step">失败数</p>
                            <p>failure number</p>
                        </span>
                    </li>
                </ul>
                <div class="a-btn-list result">
                    <a href="javascript:;">下载结果</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../js/lib/jquery-1.11.3.min.js"></script>
<script src="../js/lib/jstree.min.js"></script>
<script src="../js/lib/dcalendar.picker.js"></script>
<script  src="../js/webuploader/webuploader.js"></script>
<script>
$(function () {
	$('#mydatepicker').dcalendarpicker({
		format:'yyyy-mm-dd'
	});
	$('#mydatepicker2').dcalendarpicker({
			format:'yyyy-mm-dd'
	}); 
    $('#mydatepicker3').dcalendarpicker({
            format:'yyyy-mm-dd'
    }); 
    $('#mydatepicker4').dcalendarpicker({
            format:'yyyy-mm-dd'
    }); 
	$('#treeview').jstree({
	    'core' : {
	      'data' : [
	        {   "text" : "贵州移动",
	        	"state" : {"opened" : true },
	         	"children" : [
		            { "text" : "省本部",
		              "children" : [
		              	  {
		              	  	"text" : "本部1"
		              	  },
		              	  {
		              	  	"text" : "本部2"
		              	  },
		              ]	
		        	},
		            { "text" : "贵阳分公司",
		            	"children" : [
		            		{
		            			"text" : "分公司1"
		            		}
		            	] 
		        	},
		            { "text" : "遵义分公司" },
		            { "text" : "安顺分公司" },
		            { "text" : "黔南分公司" },
		            { "text" : "黔东南分公司" },
		            { "text" : "铜仁分公司" },
		            { "text" : "毕节分公司" },
		            { "text" : "六盘水分公司" },
		            { "text" : "黔西南分公司" },
		            { "text" : "中移通信技术工程" },
		            { "text" : "政企客户分公司" },
	          ]
	        }
	      ]
	    }
	  }).on("changed.jstree", function (e, data) {
		  console.log(data.instance.get_selected(true)[0].text);
		  // console.log(data.instance.get_node(data.selected[0]).text);
	    });

	  var $tableMenus = $('#table-menus'),
	  	  menuHight = $tableMenus.height();
	  var $table = $('#table');
	  var $win = $(window),
	  	  wHeight = $win.height();
	  var maxTop = wHeight - menuHight;
	  $table.on('click','.more-wrap',function(){

	  	var offset = $(this).find('.icon-more').offset();
	  	offset.left -= 100; 
	  	offset.top += 20; 
	    offset.top =  offset.top > maxTop ? maxTop : offset.top;
	  	$tableMenus.css(offset).toggle();
	  }).find('tbody').on('click','.icon-uncheck',function () {
	  	$(this).toggleClass('icon-checked');
	  });

	  $tableMenus.on('click','.item',function(){
	  	$tableMenus.hide();
	  });
	  var $open = $('#open');
	  $('#shrink').on('click',function () {
	  	$('#main').addClass('close');
	  	 $open.css({
	  	 	display : 'inline-block'
	  	 });
	  });

	  $open.on('click',function () {
	  	$('#main').removeClass('close');
	  	$open.hide();
	  });

	  var $selectList = $('#select-list');
	  $('#select-wrap').on('click',function () {
	  	$selectList.show();
	  })
	  $selectList.on('click','li',function (e) {
	  	$selectList.hide();
	  	e.stopPropagation();
	  	$('#select').val($(this).text());
	  });


    //关闭信息提示弹窗
    $(".icon-close-white").click(function(){
        $(".body-alert").fadeOut();
    })

    // 新增组织信息弹窗中必填项失去焦点后的样式操作
    $(".add-org input,.add-org select").each(function(){
        $(this).blur(function(){
            if($(this).parent(".input-colum").find("i").length>0 && ($(this).val()=="" || $(this).val()==null)){
                if(!$(this).parent(".input-colum").hasClass("must")){
                    $(this).parent(".input-colum").append("<p class='must'>此为必填项</p>");
                    $(this).hide();
                }
                $(".add-org .must").click(function(){
                    $(this).parent(".input-colum").find("input,select").show().focus();
                    $(this).remove();
                })
            }
        })
    })


    // 文件上传
    var uploader = WebUploader.create({

        // swf文件路径
        swf: '../js/webuploader/Uploader.swf',

        // 文件接收服务端。
        server: 'http://webuploader.duapp.com/server/fileupload.php',

        // 选择文件的按钮。可选。
        // 内部根据当前运行是创建，可能是input元素，也可能是flash.
        pick: '#picker',

        // 不压缩image, 默认如果是jpeg，文件上传前会压缩一把再上传！
        resize: false
    });

    // 当有文件被添加进队列的时候
    uploader.on( 'fileQueued', function( file ) {
        $(".input-file").append('<span style="width:auto;" id="'+file.id+'">'+file.name+'&nbsp;&nbsp;</span>');

    });

    // 文件上传过程中创建进度条实时显示。
    uploader.on( 'uploadProgress', function( file, percentage ) {
        var $li = $( '#'+file.id ),
            $percent = $li.find('.progress .progress-bar');

        // 避免重复创建
        if ( !$percent.length ) {
            $percent = $('<div class="progress progress-striped active">' +
              '<div class="progress-bar" role="progressbar" style="width: 0%">' +
              '</div>' +
            '</div>').appendTo( $li ).find('.progress-bar');
        }

        $li.find('p.state').text('上传中');

        $percent.css( 'width', percentage * 100 + '%' );
    });

    // 文件成功、失败处理
    uploader.on( 'uploadSuccess', function( file ) {
        $( '#'+file.id ).find('p.state').text('已上传');
    });

    uploader.on( 'uploadError', function( file ) {
        $( '#'+file.id ).find('p.state').text('上传出错');
    });

    uploader.on( 'uploadComplete', function( file ) {
        $( '#'+file.id ).find('.progress').fadeOut();
    });
})
</script>
</body>
</html>










